<html>
<head>
    <script src="http://code.jquery.com/jquery-1.7.min.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script src="http://openweathermap.org/js/OWM.GoogleMap.1.0.js"></script>

</head>

<body>
    <div id="map" style="width: 100%; height: 100%"></div>

    <script>
        var station_list;

        var map;
        var markersArray = [];
        var iActiveMarker = -1;

        jQuery(document).ready(function () {

            var lat = 55.8;
            var lng = 37.5;

            var point = new google.maps.LatLng(lat, lng);
            var myOptions = {
                zoom: 10,
                center: point,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById("map"), myOptions);
            google.maps.event.addListener(map, 'idle', function () {
                var bounds = map.getBounds();
                var ln = bounds.getNorthEast();
                var ln2 = bounds.getSouthWest();
                var z = map.getZoom();
                var myhre = 'http://openweathermap.org/data/getrect?type=city&cnt=200&lat1=' +
                    ln2.lat() + '&lat2=' + ln.lat() + '&lng1=' + ln2.lng() + '&lng2=' + ln.lng() +
                    "&cluster=yes&zoom=" + z + "&callback=?";
                $.getJSON(myhre, getData);
            });

        });
    </script>
</body>

</html>